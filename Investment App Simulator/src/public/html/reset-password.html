<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reset Password - Paper Trading</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../css/reset-password.css" />
  <link rel="stylesheet" href="../css/forgot-password.css" />
  <link rel="stylesheet" href="../css/login.css" /> <!-- for shared styles like .password-row -->
</head>

<body>
  <div class="container">
    <!-- Left branding panel -->
    <div class="left-panel">
      <div class="overlay">
        <h1>Paper Trading</h1>
        <p>Practice trading risk-free and grow your portfolio skills in a safe environment.</p>
      </div>
    </div>

    <!-- Right form panel -->
    <div class="right-panel">
      <div class="reset-card">
        <div class="lock-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" width="50" height="50">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 11c1.657 0 3 1.343 3 3v2a3 3 0 11-6 0v-2c0-1.657 1.343-3 3-3z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M17 11V7a5 5 0 10-10 0v4M5 11h14a2 2 0 012 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2v-7a2 2 0 012-2z" />
          </svg>
        </div>

        <h2>Reset your password</h2>
        <p>Please enter and confirm your new password below.</p>

        <form id="resetForm">
          <!-- New password -->
          <div class="form-group password-row">
            <input type="password" id="newPassword" placeholder="New password" required />
            <span id="toggleNewPassword" class="password-toggle" aria-label="Toggle new password">
              <svg id="eyeIcon1" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5
                     c4.478 0 8.268 2.943 9.542 7
                     -1.274 4.057-5.064 7-9.542 7
                     -4.477 0-8.268-2.943-9.542-7z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
            </span>
          </div>

          <!-- Confirm password -->
          <div class="form-group password-row">
            <input type="password" id="confirmPassword" placeholder="Confirm new password" required />
            <span id="toggleConfirmPassword" class="password-toggle" aria-label="Toggle confirm password">
              <svg id="eyeIcon2" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5
                     c4.478 0 8.268 2.943 9.542 7
                     -1.274 4.057-5.064 7-9.542 7
                     -4.477 0-8.268-2.943-9.542-7z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
            </span>
          </div>

          <button type="submit">Update Password</button>
        </form>

        <p id="statusMessage" class="status-message"></p>

        <p class="return-link">
          ‚Üê <a href="login.html">Return to login</a>
        </p>
      </div>
    </div>
  </div>

  <script src="../js/reset-password.js"></script>
  <script>
    // --- Password eye toggle logic (same as login/register) ---
    const newPasswordInput = document.getElementById("newPassword");
    const confirmPasswordInput = document.getElementById("confirmPassword");
    const toggleNewPassword = document.getElementById("toggleNewPassword");
    const toggleConfirmPassword = document.getElementById("toggleConfirmPassword");
    const eyeIcon1 = document.getElementById("eyeIcon1");
    const eyeIcon2 = document.getElementById("eyeIcon2");

    function smoothToggle(input, type) {
      input.style.transition = "color 0.25s ease-in-out";
      input.style.color = "transparent";
      setTimeout(() => {
        input.setAttribute("type", type);
        input.style.color = "";
      }, 150);
    }

    // Toggle for new password
    toggleNewPassword.addEventListener("click", () => {
      const type = newPasswordInput.getAttribute("type") === "password" ? "text" : "password";
      smoothToggle(newPasswordInput, type);
      eyeIcon1.innerHTML =
        type === "text"
          ? `<path stroke-linecap="round" stroke-linejoin="round"
              d="M17.94 17.94A10.07 10.07 0 0112 19
                 c-4.478 0-8.268-2.943-9.542-7
                 a9.973 9.973 0 012.17-3.32M9.88 9.88
                 a3 3 0 104.24 4.24M3 3l18 18" />`
          : `<path stroke-linecap="round" stroke-linejoin="round"
              d="M2.458 12C3.732 7.943 7.523 5 12 5
                 c4.478 0 8.268 2.943 9.542 7
                 -1.274 4.057-5.064 7-9.542 7
                 -4.477 0-8.268-2.943-9.542-7z" />
             <circle cx="12" cy="12" r="3" />`;
    });

    // Toggle for confirm password
    toggleConfirmPassword.addEventListener("click", () => {
      const type = confirmPasswordInput.getAttribute("type") === "password" ? "text" : "password";
      smoothToggle(confirmPasswordInput, type);
      eyeIcon2.innerHTML =
        type === "text"
          ? `<path stroke-linecap="round" stroke-linejoin="round"
              d="M17.94 17.94A10.07 10.07 0 0112 19
                 c-4.478 0-8.268-2.943-9.542-7
                 a9.973 9.973 0 012.17-3.32M9.88 9.88
                 a3 3 0 104.24 4.24M3 3l18 18" />`
          : `<path stroke-linecap="round" stroke-linejoin="round"
              d="M2.458 12C3.732 7.943 7.523 5 12 5
                 c4.478 0 8.268 2.943 9.542 7
                 -1.274 4.057-5.064 7-9.542 7
                 -4.477 0-8.268-2.943-9.542-7z" />
             <circle cx="12" cy="12" r="3" />`;
    });

    // Show/hide eye icons when typing
    [newPasswordInput, confirmPasswordInput].forEach((input, i) => {
      const toggle = i === 0 ? toggleNewPassword : toggleConfirmPassword;
      input.addEventListener("input", () => {
        toggle.classList.toggle("visible", input.value.length > 0);
      });
    });
  </script>
</body>

</html>
